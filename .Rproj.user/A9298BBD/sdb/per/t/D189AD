{
    "collab_server" : "",
    "contents" : "#' Life Expectancy Lost in Age x\n#'\n#' Life expectancy lost by those who die in age interval [x, x+w).\n#'\n#' @param x  start of age interval\n#' @param ex life expectancy at age x\n#' @param wx width of age interval x [x, x+wx)\n#' @param ax average time spent in age interval x before dying in that interval\n#'\n#' @details We assume that `x`, `ex`, `wx` and `ax` are columns of a single\n#'   standard format lifetable: 1) age groups are ordered from low to high. 2)\n#'   there are no gaps between subsequent age groups. 3) The last age group is\n#'   open to the right.\n#'\n#'   If only `x` and `ex` are specified an age interval of 1, and an ax of 0.5\n#'   are assumed.\n#'\n#' @examples\n#' # life expectancy lost in age x for a 1x1 lifetable of Swedish females\n#' swe      <- subset(sweden1x1, period == 1757 & sex == \"female\")\n#' ExDagger(x = swe$x, ex = swe$ex)\n#'\n#' # life expectancy lost in age [x,x+wx) for a 5x5 lifetable of Swedish females\n#' swe      <- subset(sweden5x5, period == \"1755-1759\" & sex == \"female\")\n#' swe$wx[is.na(swe$wx)] <- 2 # last age group (110+) is assumed to be 2 years wide\n#' ExDagger(x = swe$x, ex = swe$ex, wx = swe$wx, ax = swe$ax)\n#'\n#' @export\nExDagger <- function (x, ex, wx = 1, ax = 0.5) {\n  exwx <- c(ex[-1], ex[length(ex)])\n  A <- ax/wx\n  return(\n    A * exwx + (1 - A) * ex\n  )\n}\n\n#' Total Life Expectancy Lost\n#'\n#' Life expectancy lost due to death.\n#'\n#' @param dx       age distribution of deaths\n#' @param exdagger life expectancy lost at age x\n#' @param radix    initial lifetable population (dx scaling factor)\n#'\n#' @examples\n#' # total life expectancy lost for a 1x1 lifetable of Swedish females\n#' swe      <- subset(sweden1x1, period == 1757 & sex == \"female\")\n#' exdagger <- ExDagger(x = swe$x, ex = swe$ex)\n#' EDagger(dx = swe$dx, exdagger = exdagger, radix = 100000)\n#'\n#' # total life expectancy lost for a 5x5 lifetable of Swedish females\n#' swe      <- subset(sweden5x5, period == \"1755-1759\" & sex == \"female\")\n#' swe$wx[is.na(swe$wx)] <- 2 # last age group (110+) is assumed to be 2 years wide\n#' exdagger <- ExDagger(x = swe$x, ex = swe$ex, wx = swe$wx, ax = swe$ax)\n#' EDagger(dx = swe$dx, exdagger = exdagger, radix = 100000)\n#'\n#' @export\nEDagger <- function (dx, exdagger, radix = 1) {\n  return(\n    sum(dx*exdagger) / radix\n  )\n}\n\n#' Keyfitz's Entropy\n#'\n#' A measure for the lifespan equality in a population.\n#'\n#' @param edagger total life expectancy lost due to death\n#' @param e0      life expectancy at birth\n#'\n#' @examples\n#' # lifespan equality for a 1x1 lifetable of Swedish females\n#' swe      <- subset(sweden1x1, period == 1757 & sex == \"female\")\n#' exdagger <- ExDagger(x = swe$x, ex = swe$ex)\n#' edagger  <- EDagger(dx = swe$dx, exdagger = exdagger, radix = 100000)\n#' KeyfzEntro(edagger = edagger, e0 = swe$ex[1])\n#'\n#' # lifespan equality for a 5x5 lifetable of Swedish females\n#' swe      <- subset(sweden5x5, period == \"1755-1759\" & sex == \"female\")\n#' swe$wx[is.na(swe$wx)] <- 2 # last age group (110+) is assumed to be 2 years wide\n#' exdagger <- ExDagger(x = swe$x, ex = swe$ex, wx = swe$wx, ax = swe$ax)\n#' edagger  <- EDagger(dx = swe$dx, exdagger = exdagger, radix = 100000)\n#' KeyfzEntro(edagger = edagger, e0 = swe$ex[1])\n#'\n#' @export\nKeyfzEntro <- function (edagger, e0) {\n  return(\n    edagger / e0\n  )\n}\n\n#' Single Year Period Life-tables for Sweden 1751-2014 by Sex\n#'\n#' A dataset containing period life-tables for Sweden years 1751-2014 by sex in\n#' single year period and age intervals.\n#'\n#' @details\n#'   The dataset has been altered from the original form provided by the Human\n#'   Mortality database.\n#'\n#' @format A data frame with 58,608 rows and 11 variables:\n#' \\describe{\n#'   \\item{sex}{females or males}\n#'   \\item{period}{period in years}\n#'   \\item{x}{start of age interval in years}\n#'   \\item{mx}{mortality rate in age interval [x, x+wx)}\n#'   \\item{qx}{probability of death in age interval [x, x+wx)}\n#'   \\item{ax}{average time spent in age interval [x, x+wx) when dying in that interval}\n#'   \\item{lx}{survivors at age x}\n#'   \\item{dx}{deaths in age interval [x, x+wx)}\n#'   \\item{Lx}{total person-years lived in age interval [x, x+wx)}\n#'   \\item{Tx}{total person-years yet to live starting age x}\n#'   \\item{ex}{life-expectancy at age x}\n#' }\n#'\n#' @source The Human Mortality Database \\url{http://www.mortality.org/}\n\"sweden1x1\"\n\n#' Five Year Period Life-tables for Sweden 1755-2014 by Sex\n#'\n#' A dataset containing period life-tables for Sweden years 1755-2014 by sex in\n#' five year period and age intervals.\n#'\n#' @details\n#'   Infant and early childhood mortality are given in 1 and 4 year age intervals.\n#'\n#'   The dataset has been altered from the original form provided by the Human\n#'   Mortality database.\n#'\n#' @format A data frame with 2,496 rows and 12 variables:\n#' \\describe{\n#'   \\item{sex}{females or males}\n#'   \\item{period}{period range in years [start, end]}\n#'   \\item{x}{start of age interval in years}\n#'   \\item{wx}{width of age interval in years}\n#'   \\item{mx}{mortality rate in age interval [x, x+wx)}\n#'   \\item{qx}{probability of death in age interval [x, x+wx)}\n#'   \\item{ax}{average time spent in age interval [x, x+wx) when dying in that interval}\n#'   \\item{lx}{survivors at age x}\n#'   \\item{dx}{deaths in age interval [x, x+wx)}\n#'   \\item{Lx}{total person-years lived in age interval [x, x+wx)}\n#'   \\item{Tx}{total person-years yet to live starting age x}\n#'   \\item{ex}{life-expectancy at age x}\n#' }\n#'\n#' @source The Human Mortality Database \\url{http://www.mortality.org/}\n\"sweden5x5\"",
    "created" : 1456312210990.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "561674182",
    "id" : "D189AD",
    "lastKnownWriteTime" : 1456408693,
    "last_content_update" : 1456408693690,
    "path" : "~/lucile/share/jowncloud/sci/rpckg/lifequal/R/lifequal.R",
    "project_path" : "R/lifequal.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}